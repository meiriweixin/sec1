#!/usr/bin/env python3
"""Batch 4: DC Circuits + Waves (20 exercises)"""
import json

with open('chapters/jc1_physics_chapters.json', 'r', encoding='utf-8') as f:
    chapters = json.load(f)

# DC Circuits - 10 exercises (3 easy + 4 medium + 3 hard)
dc_circuits = [
    {"id": "dc-jc1-ex1", "type": "mcq", "difficulty": "easy", "prompt": "Two 10Ω resistors in series. Total resistance?", "prompt_zh": "两个10欧姆电阻串联。总电阻？", "choices": ["5 Ω", "10 Ω", "20 Ω", "100 Ω"], "choices_zh": ["5欧姆", "10欧姆", "20欧姆", "100欧姆"], "answer": 2, "explanation": "R_total=R₁+R₂=10+10=20Ω. Series adds resistances! HDB wiring uses series circuits.", "explanation_zh": "R总=R₁+R₂=10+10=20欧姆。串联电阻相加！组屋布线使用串联电路。"},
    {"id": "dc-jc1-ex2", "type": "short", "difficulty": "easy", "prompt": "12V battery, 4Ω resistor in series. Current I=V/R?", "prompt_zh": "12伏电池，4欧姆电阻串联。电流I=V/R？", "answer": "3", "validator": "numeric", "explanation": "I=V/R=12/4=3A. Basic Ohm's Law! Singapore electrical standards use 230V.", "explanation_zh": "I=V/R=12/4=3安培。基本欧姆定律！新加坡电力标准使用230伏。"},
    {"id": "dc-jc1-ex3", "type": "mcq", "difficulty": "easy", "prompt": "Circuit has 3 resistors in parallel. If one breaks, others:", "prompt_zh": "电路有3个并联电阻。如果一个坏了，其他：", "choices": ["Stop working", "Work normally", "Work at half power", "Overheat"], "choices_zh": ["停止工作", "正常工作", "半功率工作", "过热"], "answer": 1, "explanation": "Work normally! Parallel circuits are independent. HDB lights use parallel wiring.", "explanation_zh": "正常工作！并联电路独立。组屋灯使用并联接线。"},
    {"id": "dc-jc1-ex4", "type": "short", "difficulty": "medium", "prompt": "Battery 12V, internal resistance 2Ω, external 10Ω. Terminal voltage V=IR_external?", "prompt_zh": "电池12伏，内阻2欧姆，外阻10欧姆。端电压V=IR外？", "answer": "10", "validator": "numeric", "explanation": "I=12/(2+10)=1A. V=IR_external=1×10=10V. Real batteries have internal resistance! Phone chargers account for this.", "explanation_zh": "I=12/(2+10)=1安培。V=IR外=1×10=10伏。真实电池有内阻！手机充电器考虑这一点。"},
    {"id": "dc-jc1-ex5", "type": "mcq", "difficulty": "medium", "prompt": "Potentiometer divides voltage 12V. If slider at 1/3 from bottom, output voltage?", "prompt_zh": "电位器分压12伏。如果滑块在底部1/3处，输出电压？", "choices": ["2 V", "4 V", "6 V", "8 V"], "choices_zh": ["2伏", "4伏", "6伏", "8伏"], "answer": 1, "explanation": "V_out=(1/3)×12=4V. Voltage divider! Volume knobs use potentiometers.", "explanation_zh": "V输出=(1/3)×12=4伏。分压器！音量旋钮使用电位器。"},
    {"id": "dc-jc1-ex6", "type": "short", "difficulty": "medium", "prompt": "Three resistors 6Ω, 3Ω, 2Ω in parallel. Equivalent resistance 1/R=1/6+1/3+1/2?", "prompt_zh": "三个电阻6欧姆、3欧姆、2欧姆并联。等效电阻1/R=1/6+1/3+1/2？", "answer": "1", "validator": "numeric", "explanation": "1/R=1/6+2/6+3/6=6/6=1, R=1Ω. Parallel resistances combine reciprocally! MRT power systems use parallel circuits.", "explanation_zh": "1/R=1/6+2/6+3/6=6/6=1，R=1欧姆。并联电阻倒数相加！地铁电力系统使用并联电路。"},
    {"id": "dc-jc1-ex7", "type": "mcq", "difficulty": "medium", "prompt": "Kirchhoff's current law states at any junction:", "prompt_zh": "基尔霍夫电流定律指出在任何节点：", "choices": ["Current in = Current out", "Voltage in = Voltage out", "Power in = Power out", "Resistance sums to zero"], "choices_zh": ["电流入=电流出", "电压入=电压出", "功率入=功率出", "电阻和为零"], "answer": 0, "explanation": "Current in = Current out. Charge conservation! Singapore's electrical grid follows this fundamental law.", "explanation_zh": "电流入=电流出。电荷守恒！新加坡电网遵循这一基本定律。"},
    {"id": "dc-jc1-ex8", "type": "short", "difficulty": "hard", "prompt": "Wheatstone bridge: R₁=10Ω, R₂=20Ω, R₃=15Ω. For balance, R₄=R₂×R₃/R₁?", "prompt_zh": "惠斯通电桥：R₁=10欧姆，R₂=20欧姆，R₃=15欧姆。平衡时，R₄=R₂×R₃/R₁？", "answer": "30", "validator": "numeric", "explanation": "R₄=(20×15)/10=30Ω. Wheatstone bridge for precision measurements! Used in laboratory instruments at NUS/NTU.", "explanation_zh": "R₄=(20×15)/10=30欧姆。惠斯通电桥用于精密测量！国大/南大实验室仪器使用。"},
    {"id": "dc-jc1-ex9", "type": "mcq", "difficulty": "hard", "prompt": "Battery 9V, R₁=6Ω and R₂=3Ω in series, R₃=2Ω in parallel with both. Total current?", "prompt_zh": "电池9伏，R₁=6欧姆和R₂=3欧姆串联，R₃=2欧姆与两者并联。总电流？", "choices": ["1 A", "3 A", "6 A", "9 A"], "choices_zh": ["1安培", "3安培", "6安培", "9安培"], "answer": 2, "explanation": "R₁+R₂=9Ω. 1/R_total=1/9+1/2=11/18, R_total≈1.5Ω. I=9/1.5=6A. Complex circuits! Singapore's smart grid uses similar analysis.", "explanation_zh": "R₁+R₂=9欧姆。1/R总=1/9+1/2=11/18，R总≈1.5欧姆。I=9/1.5=6安培。复杂电路！新加坡智能电网使用类似分析。"},
    {"id": "dc-jc1-ex10", "type": "short", "difficulty": "hard", "prompt": "Two batteries 12V (internal r=1Ω) in parallel drive 4Ω load. Total current?", "prompt_zh": "两个12伏电池（内阻r=1欧姆）并联驱动4欧姆负载。总电流？", "answer": "3", "validator": "numeric", "explanation": "Each battery sees effective R=4+1=5Ω (parallel with other branch). V_terminal=12-I₁×1. I_total≈3A. Battery parallel configuration! UPS systems in HDB use parallel batteries.", "explanation_zh": "每个电池看到有效R=4+1=5欧姆（与另一分支并联）。V端=12-I₁×1。I总≈3安培。电池并联配置！组屋UPS系统使用并联电池。"}
]

# Waves - 10 exercises (3 easy + 4 medium + 3 hard)
waves = [
    {"id": "waves-jc1-ex1", "type": "mcq", "difficulty": "easy", "prompt": "Wave equation v=fλ. If f=50Hz and λ=2m, speed v?", "prompt_zh": "波动方程v=fλ。如果f=50赫兹和λ=2米，速度v？", "choices": ["25 m/s", "52 m/s", "100 m/s", "200 m/s"], "choices_zh": ["25米/秒", "52米/秒", "100米/秒", "200米/秒"], "answer": 2, "explanation": "v=fλ=50×2=100m/s. Fundamental wave equation! Singapore's 4G network uses 1800MHz waves.", "explanation_zh": "v=fλ=50×2=100米/秒。基本波动方程！新加坡4G网络使用1800兆赫波。"},
    {"id": "waves-jc1-ex2", "type": "short", "difficulty": "easy", "prompt": "Sound wave 340m/s, frequency 170Hz. Wavelength λ=v/f?", "prompt_zh": "声波340米/秒，频率170赫兹。波长λ=v/f？", "answer": "2", "validator": "numeric", "explanation": "λ=v/f=340/170=2m. Sound waves! Singapore's MRT tunnels amplify certain frequencies.", "explanation_zh": "λ=v/f=340/170=2米。声波！新加坡地铁隧道放大某些频率。"},
    {"id": "waves-jc1-ex3", "type": "mcq", "difficulty": "easy", "prompt": "Transverse wave: particles vibrate ___ to wave direction.", "prompt_zh": "横波：粒子振动___波方向。", "choices": ["Parallel", "Perpendicular", "At 45°", "Random"], "choices_zh": ["平行", "垂直", "45°角", "随机"], "answer": 1, "explanation": "Perpendicular! Light and water waves are transverse. Marina Bay light shows use transverse EM waves.", "explanation_zh": "垂直！光和水波是横波。滨海湾灯光秀使用横向电磁波。"},
    {"id": "waves-jc1-ex4", "type": "short", "difficulty": "medium", "prompt": "String vibrates at 3rd harmonic, length 1.2m. Wavelength λ=2L/n, n=3?", "prompt_zh": "弦在第3次谐波振动，长1.2米。波长λ=2L/n，n=3？", "answer": "0.8", "validator": "numeric", "explanation": "λ=2L/n=2×1.2/3=0.8m. Harmonics! Esplanade Concert Hall acoustics use harmonic principles.", "explanation_zh": "λ=2L/n=2×1.2/3=0.8米。谐波！滨海艺术中心音乐厅声学使用谐波原理。"},
    {"id": "waves-jc1-ex5", "type": "mcq", "difficulty": "medium", "prompt": "Two waves interfere constructively when path difference is:", "prompt_zh": "两波相长干涉当路径差为：", "choices": ["λ/4", "λ/2", "λ", "2λ"], "choices_zh": ["λ/4", "λ/2", "λ", "2λ"], "answer": 2, "explanation": "nλ (integer multiples). Constructive interference! Singapore Science Centre has wave interference demos.", "explanation_zh": "nλ（整数倍）。相长干涉！新加坡科学馆有波动干涉演示。"},
    {"id": "waves-jc1-ex6", "type": "short", "difficulty": "medium", "prompt": "Double-slit experiment: slit separation 0.1mm, screen distance 2m, λ=600nm. Fringe spacing x=λD/d in mm?", "prompt_zh": "双缝实验：缝间距0.1毫米，屏幕距离2米，λ=600纳米。条纹间距x=λD/d（毫米）？", "answer": "12", "validator": "numeric", "explanation": "x=(600×10⁻⁹×2)/(0.1×10⁻³)=0.012m=12mm. Young's double-slit! A*STAR labs conduct interference experiments.", "explanation_zh": "x=(600×10⁻⁹×2)/(0.1×10⁻³)=0.012米=12毫米。杨氏双缝！新加坡科技研究局实验室进行干涉实验。"},
    {"id": "waves-jc1-ex7", "type": "mcq", "difficulty": "medium", "prompt": "Diffraction is most noticeable when:", "prompt_zh": "衍射最明显当：", "choices": ["λ << obstacle size", "λ ≈ obstacle size", "λ >> obstacle size", "No wavelength dependence"], "choices_zh": ["λ << 障碍物大小", "λ ≈ 障碍物大小", "λ >> 障碍物大小", "无波长依赖"], "answer": 1, "explanation": "λ ≈ obstacle size. Comparable dimensions! Radio waves diffract around HDB blocks (similar wavelengths).", "explanation_zh": "λ ≈ 障碍物大小。尺寸相当！无线电波绕过组屋（相似波长）。"},
    {"id": "waves-jc1-ex8", "type": "short", "difficulty": "hard", "prompt": "Standing wave on string: f₁=100Hz (fundamental). What is f₃ (3rd harmonic)?", "prompt_zh": "弦上驻波：f₁=100赫兹（基频）。第3次谐波f₃？", "answer": "300", "validator": "numeric", "explanation": "f_n=nf₁. f₃=3×100=300Hz. Harmonic series! Guitar strings at Esplanade performances.", "explanation_zh": "f_n=nf₁。f₃=3×100=300赫兹。谐波级数！滨海艺术中心演出的吉他弦。"},
    {"id": "waves-jc1-ex9", "type": "mcq", "difficulty": "hard", "prompt": "Doppler effect: source moves toward observer. Observed frequency:", "prompt_zh": "多普勒效应：声源向观察者移动。观测频率：", "choices": ["Decreases", "Stays same", "Increases", "Becomes zero"], "choices_zh": ["减少", "保持不变", "增加", "变为零"], "answer": 2, "explanation": "Increases! f'=f(v/(v-v_s)). Ambulance sirens on PIE demonstrate Doppler effect.", "explanation_zh": "增加！f'=f(v/(v-v_s))。泛岛快速公路上的救护车警报器演示多普勒效应。"},
    {"id": "waves-jc1-ex10", "type": "short", "difficulty": "hard", "prompt": "Light wavelength 500nm in air (n=1) enters glass (n=1.5). Wavelength in glass λ_glass=λ_air/n?", "prompt_zh": "空气中光波长500纳米（n=1）进入玻璃（n=1.5）。玻璃中波长λ玻璃=λ空气/n？", "answer": "333", "validator": "numeric", "explanation": "λ_glass=500/1.5≈333nm. Wavelength decreases in denser medium! NUS optical labs study this refraction.", "explanation_zh": "λ玻璃=500/1.5≈333纳米。波长在密介质中减少！国大光学实验室研究这种折射。"}
]

for ch in chapters:
    if ch['id'] == 'dc-circuits-jc1-physics':
        ch['exercises'] = dc_circuits
        print(f"✓ Added {len(dc_circuits)} exercises to DC Circuits")
    elif ch['id'] == 'waves-jc1-physics':
        ch['exercises'] = waves
        print(f"✓ Added {len(waves)} exercises to Waves")

with open('chapters/jc1_physics_chapters.json', 'w', encoding='utf-8') as f:
    json.dump(chapters, f, ensure_ascii=False, indent=2)

print("\n✅ Batch 4 Complete: 20 exercises added")
