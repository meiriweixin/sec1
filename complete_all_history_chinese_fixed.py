#!/usr/bin/env python3
"""
Add Chinese content to all remaining History chapters with CORRECT section IDs
"""

import json
from datetime import datetime

def create_backup(filepath):
    """Create a backup of the original file"""
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    backup_path = f"src/data/content-backup-all-history-zh-{timestamp}.json"
    
    with open(filepath, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    with open(backup_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    
    print(f"📦 Created backup: {backup_path}")
    return backup_path

# Chinese translations with CORRECT section IDs
CHINESE_CONTENT = {
    "british-trading-post-establishment": {
        "sparking-curiosity-1819": """**想象这个场景：**

现在是1819年1月29日。一艘英国船在一个小岛附近抛锚，岛上约有150名马来村民和一些华人农民。这个岛没有适当的港口设施，没有政府，并被两个敌对的马来统治者所声称拥有。

一位名叫**史丹福·莱佛士**（Stamford Raffles）的英国官员踏上岸边，宣称这个沼泽、蚊虫肆虐的小岛将成为一个伟大的贸易港口。

**大多数人认为他疯了。**

但在5年内，新加坡的人口增长到10,000人。在100年内，它成为世界上最繁忙的港口之一。

**这是怎么发生的？**

**关键问题：**
- 莱佛士在新加坡看到了什么别人没有看到的东西？
- 为什么英国如此热衷于在这里建立港口？
- 参与这个决定的其他关键人物是谁？
- 当地马来领袖如何回应？

让我们调查新加坡作为英国贸易站建立的戏剧性故事。""",
        
        "gathering-evidence-raffles-sources": """**资料A：莱佛士致萨默塞特公爵夫人的信（1819年）**

史丹福·莱佛士在建立新加坡后给朋友写信：

> *"我们的目标不是领土而是贸易；一个伟大的商业中心和一个支点，我们可以从中在政治上扩展我们的影响力...我精神高涨。新加坡正是我们所希望的一切。它很快就会崛起为重要地位。"*

**ONPC分析：**
- **来源（Origin）**：1819年史丹福·莱佛士的私人信件
- **性质（Nature）**：第一手资料 - 私人通信
- **目的（Purpose）**：向朋友通报他的成就和计划
- **内容（Content）**：揭示英国的动机主要是贸易，政治影响是次要目标

**我们可以推断什么？**
- 英国的首要任务是**贸易**，而不是征服领土
- 莱佛士对新加坡的潜力非常有信心
- 英国希望通过贸易在该地区获得政治影响力

---

**资料B：《新加坡条约》（1819年）**

1819年2月6日，莱佛士与**苏丹胡申·沙**和**天猛公阿都拉曼**签署了条约：

> *"英国东印度公司被允许在新加坡建立工厂[贸易站]...作为回报，苏丹每年将收到5,000西班牙元，天猛公每年将收到3,000西班牙元。"*

**ONPC分析：**
- **来源**：莱佛士、苏丹胡申和天猛公阿都拉曼签署的官方条约
- **性质**：第一手资料 - 法律文件
- **目的**：正式确立英国建立贸易站的权利
- **内容**：规定英国的权利和对当地统治者的经济补偿

**这告诉我们什么？**
- 英国获得了**法律许可**（而非征服）
- 当地马来领袖获得**年度支付**
- 双方都从协议中获益

---

**背景：英国的问题**

为什么英国如此迫切地需要找到一个新港口？

**荷兰问题：**
- 荷兰控制了东南亚大部分关键港口（马六甲、巴达维亚/雅加达）
- 荷兰对英国船只征收高额税费
- 英国东印度公司需要一个**自由港**，船只可以在那里交易而无需缴纳重税

**对华贸易：**
- 英国商人从与中国的贸易中获得巨额利润（购买茶叶、丝绸、瓷器）
- 他们需要在**印度和中国之间**建立港口用于：
  - 加油和维修
  - 储存货物
  - 等待季风风向改变
  - 与东南亚商人进行贸易

**战略位置：**
莱佛士发现新加坡具有：
- 深水天然港口
- 位于**马六甲海峡**（主要航运路线）的战略位置
- 没有荷兰控制
- 吸引来自亚洲各地商人的潜力""",
        
        "exercising-reasoning-multiple-perspectives": """**理解不同的历史叙述**

新加坡的建立对不同群体产生了不同的影响。让我们审视多个视角：

---

**1. 英国的视角（史丹福·莱佛士和威廉·法夸尔）**

**史丹福·莱佛士**（1781-1826）：
- 明古鲁（苏门答腊）副总督
- 将新加坡视为挑战荷兰主导地位的方式
- 相信**自由贸易**（对货物不征税）
- 希望传播英国的影响力和"文明"

**威廉·法夸尔**（1774-1839）：
- 新加坡第一任驻地官（总督）
- 前马六甲驻地官，能流利说马来语
- 专注于实际管理和防御
- 与当地马来领袖关系良好

**英国动机：**
- **经济**：从中国-印度贸易路线中获利
- **战略**：对抗该地区的荷兰势力
- **政治**：扩大英国影响力而不打昂贵的战争

---

**2. 马来人的视角（苏丹胡申和天猛公阿都拉曼）**

**苏丹胡申·沙**（1776-1835）：
- 前任柔佛苏丹的次子
- 被跳过继承权，让位给他的兄弟
- 将英国的支持视为加强他苏丹地位主张的方式
- 每年从英国获得5,000西班牙元

**天猛公阿都拉曼**（1770年代-1825）：
- 控制新加坡地区的马来酋长
- 只有约500-1,000名追随者居住在新加坡
- 将英国的存在视为：
  - 增加财富和权力的方式
  - 对抗竞争对手的保护
  - 让他的人民从贸易中受益的机会

**马来人动机：**
- **政治**：在继承纠纷中获得英国支持
- **经济**：获得年度支付并分享贸易繁荣
- **安全**：英国对海盗和竞争对手的保护

---

**3. 荷兰的视角**

荷兰对英国建立新加坡感到**愤怒**，因为：
- 它挑战了他们在该地区的垄断
- 英国的自由贸易政策威胁到他们的税收
- 他们声称柔佛苏丹无权签署条约（因为他们承认另一个兄弟为苏丹）

这导致了紧张局势，直到**1824年英荷条约**才得以解决，该条约：
- 将新加坡和马六甲交给英国控制
- 将苏门答腊的领土交给荷兰控制
- 划定了英国和荷兰势力范围的分界线

---

**同理心练习：设身处地**

想象你是：

**A. 1819年的马来渔民：**
- 你在岛上平静地生活了多年
- 突然，英国船只到来，签署了一项条约
- 每个月都有越来越多的外国商人到来
- 你的村庄发展成一个繁华的港口城镇

你会有什么感受？你会面临什么机遇和挑战？

**B. 1820年的华人商人：**
- 你听说有一个新的英国港口，贸易**免税**
- 你决定从中国航行到那里，看看是否值得做生意
- 你发现一个虽小但不断增长的定居点，有来自许多地方的人

你会留下来吗？你会交易什么？

**历史同理心**意味着理解过去的人们如何根据他们自己的背景和价值观思考、感受和行动——而不是用今天的标准来评判他们。""",
        
        "reflective-thinking-significance-founding": """**评估历史意义**

1819年英国新加坡的建立具有**意义**吗？历史学家使用几个标准来判断意义：

**1. 当时是否引人注目？**

是的——在荷兰主导的地区建立新的贸易港口是一个大胆而有风险的举动。许多英国官员认为莱佛士越权了。

**2. 是否导致了变化？**

**立即变化（1819-1830年代）：**
- 人口激增：150人（1819）→ 10,000（1824）→ 29,000（1830）
- 快速发展：建立道路、建筑物、政府
- 形成多民族社会：华人、马来人、印度人、欧洲人、阿拉伯人
- 自由贸易政策吸引了来自亚洲各地的商人

**长期变化：**
- 到1900年，新加坡发展成为世界上最繁忙的港口之一
- 英国统治持续到1965年（146年）
- 塑造了新加坡的多种族、多语言社会
- 建立了延续至今的贸易型经济

**3. 是否影响了许多人？**

是的：
- **本地马来人**：失去了对家园的控制，但有些人从贸易中繁荣起来
- **华人移民**：数以万计的人前来寻求经济机会
- **印度移民**：被英国带来作为劳工、商人和公务员
- **英国人**：获得了一个战略性和有利可图的港口
- **地区大国**：改变了英国和荷兰之间的力量平衡

**4. 与后来的事件相关吗？**

绝对相关：
- 现代多种族新加坡的基础
- 新加坡以贸易为重点的经济的基础
- 创造了英语行政文化
- 为后来的独立运动奠定了基础

---

**国民教育联系：反思我们的建立**

理解新加坡是如何建立的有助于我们欣赏：

**种族和谐：**
- 新加坡从第一天起就是多元文化的
- 不同社区为了共同利益走到一起
- 我们的多样性不是弱点，而是力量的源泉

**经济务实主义：**
- 新加坡因贸易而成功，而不是自然资源
- 自由贸易和对世界开放=我们的生存策略
- 这一原则指导着新加坡的全面防卫（经济防卫支柱）

**历史意识：**
- 我们必须了解我们的历史才能理解我们是谁
- 不同社区在新加坡有不同的历史经历
- 尊重这种经历的多样性可以建立国家团结

---

**最后的反思问题：**

1. **因果关系**：英国在1819年建立新加坡的**三个**最重要原因是什么？

2. **同理心**：马来村民、华人商人和英国官员可能如何以不同方式看待建立？

3. **意义**：如果英国从未在1819年建立新加坡，今天的新加坡会一样吗？为什么会或不会？

4. **连续性和变化**：1819年新加坡的哪些方面今天仍然可以在新加坡看到？什么完全改变了？"""
    },
    
    "port-city-growth": {
        "sparking-curiosity-rapid-growth": """**从小渔村到繁华港口的惊人转变**

**1819年1月**：150人（主要是马来渔民）  
**1824年（5年后）**：10,000人  
**1860年（41年后）**：80,000人  
**1900年（81年后）**：228,000人

这是**人类历史上最快的城市增长之一**！

**但是，这是如何发生的？**

想象一下：
- 没有Facebook或Instagram宣传新加坡
- 没有飞机——从中国或印度到新加坡需要数周的危险航行
- 没有保证工作或住房
- 没有安全保障——海盗、疾病、外国土地

**然而，成千上万的人冒着生命危险来到这个小岛。**

**为什么？**

**关键问题：**
- 是什么吸引了如此多来自不同国家的人来到新加坡？
- 他们在寻找什么？
- 他们面临什么挑战？
- 新加坡如何从小渔村转变为主要港口城市？

让我们调查新加坡作为港口城市的爆炸性增长。""",
        
        "gathering-evidence-growth-factors": """**新加坡快速增长的证据**

**证据1：人口增长统计**

| 年份 | 人口 | 民族构成 |
|------|------|----------|
| 1819 | 150 | 主要是马来人 |
| 1824 | 10,683 | 华人：31%，马来人：60%，印度人：7% |
| 1860 | 81,734 | 华人：61%，马来人：16%，印度人：16% |
| 1901 | 228,555 | 华人：72%，马来人：15%，印度人：8% |

**我们可以观察到什么模式？**
- 人口在短短82年内增长了**1,500倍**
- 华人移民人数迅速超过其他群体
- 马来人从多数变为少数
- 新加坡成为**移民社会**

---

**证据2：贸易增长**

**新加坡贸易价值（海峡元）：**
- 1823年：400万元
- 1860年：5,200万元（增长13倍）
- 1900年：1.9亿元（增长47.5倍）

**主要贸易商品：**

**出口（从新加坡发送）：**
- **锡**：来自马来亚锡矿，占出口的30-40%
- **橡胶**：1900年后成为主要出口产品
- **香料**：来自印度尼西亚的丁香、肉豆蔻、胡椒
- **木材**：来自婆罗洲和马来亚

**进口（到新加坡）：**
- **鸦片**：来自印度（有争议的贸易）
- **纺织品**：来自印度和英国的棉布
- **大米**：来自缅甸和泰国
- **制成品**：来自欧洲的机械、工具

---

**证据3：移民的"推力和拉力"因素**

**"推力"因素（人们为什么离开家乡）：**

**中国：**
- **太平天国叛乱**（1850-1864）：内战造成2000万人死亡
- **贫困和饥荒**：土地稀缺，缺乏工作
- **人口增长**：人太多，资源太少
- **政治不稳定**：清朝衰落

**印度：**
- **债务**：许多农民欠放债人钱
- **饥荒**：1870-1900年间多次作物歉收
- **失业**：英国殖民政策破坏了传统工业

**印度尼西亚和马来亚：**
- **土地压力**：人口增长
- **荷兰殖民政策**：强迫劳动和重税（印度尼西亚）

**"拉力"因素（是什么吸引人们来到新加坡）：**

**1. 经济机会**
- **就业**：码头、建筑、种植园、商店工作
- **商业**：自由贸易政策意味着低创业成本
- **更高的工资**：比在家乡挣得多

**2. 自由港政策**
- **零关税**：进口/出口商品无税
- **低法规**：易于开展业务
- **吸引商人**：来自所有国家

**3. 安全和秩序**
- **英国法律**：相对稳定的法律体系
- **保护**：来自海盗和战争
- **契约劳工系统**：为贫困移民提供结构化（尽管剥削性）

**4. 社区网络**
- **宗乡会馆**：华人组织帮助新移民
- **家庭联系**：人们跟随亲戚和朋友
- **方言群体**：说同一种语言的人聚集在一起

---

**证据4：自由港政策的影响**

莱佛士1819年宣布：

> *"新加坡港口对所有国家的船只和各种货物开放，不征收任何关税。"*

**这意味着什么？**
- 商人可以自由购买/出售商品
- 没有官僚主义或许可证
- 对所有种族和国籍开放
- 完全自由贸易

**与马六甲（荷兰）的对比：**
- 马六甲：对贸易征收高额税
- 马六甲：限制某些商品
- 马六甲：荷兰商人优先

**结果：**商人蜂拥到新加坡而不是马六甲！

---

**反思问题：**
- 如果新加坡对贸易征税，它会以同样的方式增长吗？
- 为什么华人移民人数最终超过了其他群体？
- 移民经历的主要困难是什么？"""
    ,
        "exercising-reasoning-entrepot-function": """**理解转口贸易体系**

新加坡的增长是基于其作为**转口贸易港**（entrepôt）的功能。但这是什么意思？

**转口贸易港的定义：**
- 一个**中间港口**，货物在这里被进口、储存，然后再出口到其他地方
- **不是最终目的地**——而是连接世界不同地区的**中转站**

---

**新加坡转口贸易体系的运作方式：**

**步骤1：货物到达新加坡**
- 来自印度尼西亚的船只带来香料（丁香、肉豆蔻）
- 来自马来亚的船只带来锡和橡胶
- 来自中国的船只带来茶叶和丝绸
- 来自印度的船只带来鸦片和纺织品

**步骤2：储存和处理**
- 货物被卸载到**货栈**（godowns，仓库）
- **分类、重新包装、质量检查**
- 可能进行一些加工（例如，锡冶炼、橡胶烟熏）

**步骤3：再出口**
- 货物被装载到前往不同目的地的船只上
- 印度尼西亚的香料 → 送往欧洲
- 马来亚的锡 → 送往中国和欧洲
- 印度的纺织品 → 送往东南亚
- 中国的茶叶 → 送往欧洲

**为什么不直接航行？**

**原因1：距离和季风**
- 从印度尼西亚直接航行到欧洲太远
- 船只需要停靠以获取食物、水、燃料、维修
- 季风风向迫使船只等待——新加坡是理想的等待地点

**原因2：市场知识**
- 新加坡的商人了解不同市场的价格
- 他们可以购买低价商品并在价格更高的地方出售
- 集中市场=更好的信息

**原因3：船只专业化**
- 小型区域船只（帆船、驳船）将货物运到新加坡
- 大型远洋船只（汽船）将货物运到欧洲
- 比让每艘船只走遍世界更高效

**原因4：金融服务**
- 新加坡的银行提供信贷和保险
- 货币兑换服务（许多不同的货币）
- 降低长途贸易的风险

---

**新加坡转口贸易的优势：**

**1. 战略位置**
- 位于印度洋和太平洋之间
- 马六甲海峡——世界上最繁忙的航运路线之一
- 连接中国、印度、东南亚、欧洲

**2. 自由港政策**
- **零关税** = 商品更便宜
- 吸引来自所有国家的商人
- 比马六甲或巴达维亚更具竞争力

**3. 优秀的港口设施**
- **深水港**：大型船只可以停靠
- **受保护的港口**：免受风暴影响
- **高效装卸**：快速周转

**4. 多元文化商人社区**
- **中国商人**：与中国的联系
- **印度商人**：与印度的联系
- **阿拉伯商人**：与中东的联系
- **欧洲商人**：与西方的联系
- **马来商人**：与东南亚的联系

每个群体都带来了**网络和专业知识**！

---

**案例研究：锡贸易**

**步骤1：马来亚的锡矿开采**
- 霹雳和雪兰莪的中国矿工开采锡矿石
- 用船只将锡矿石运到新加坡

**步骤2：新加坡的加工**
- **海峡贸易公司**（1887）：在新加坡冶炼锡矿石
- 锡条被储存在仓库中

**步骤3：出口**
- 锡出口到：
  - **欧洲**：用于罐头食品（罐头制造）
  - **中国**：用于制造业
  - **美国**：用于工业用途

**新加坡的作用：**
- **并不生产锡**（没有锡矿）
- 但**控制了锡贸易**（加工、定价、分销）
- 从每笔交易中获利

---

**现代联系：新加坡今天仍然是转口贸易港！**

**过去（1800年代）：**
- 香料、锡、橡胶、茶叶

**今天（2020年代）：**
- **石油**：从中东进口，精炼，再出口
- **电子产品**：从中国进口，储存，再出口到世界各地
- **金融**：资金通过新加坡银行流动到亚洲
- **航空**：樟宜机场是一个"航空转口贸易港"（转机枢纽）

**相同的原则，不同的产品！**

新加坡从一开始就建立在**连接**而不是**生产**的基础上。这一战略延续了200年！""",
        
        "reflective-thinking-sustainability": """**从历史中汲取的教训**

新加坡作为港口城市的增长教给我们什么关于发展和可持续性的知识？

---

**教训1：地理不是命运——政策很重要**

**地理优势：**
- 新加坡确实有很好的位置
- 但附近的许多岛屿（如廖内群岛）也有类似的位置

**是什么让新加坡与众不同？**
- **自由贸易政策**：零关税吸引商人
- **法治**：英国法律体系提供可预测性
- **开放性**：欢迎所有种族和国籍

**现代应用：**
新加坡今天继续通过**良好的政策**而不仅仅是地理位置来竞争：
- 低税收
- 反腐败
- 高效的基础设施
- 熟练的劳动力

---

**教训2：多样性可以成为经济力量**

**19世纪新加坡的多样性：**
- 华人商人：中国市场的联系
- 印度商人：南亚的联系
- 阿拉伯商人：中东的联系
- 马来商人：东南亚的联系
- 欧洲商人：西方市场的联系

**协同效应：**
多元文化人口创造了一个**连接全球的贸易网络**。没有其他港口具有如此多样化的商人社区。

**今天：**
新加坡的多种族社会仍然是其经济力量：
- 会说多种语言（英语、中文、马来语、泰米尔语）
- 与许多国家的文化联系
- 吸引来自世界各地的人才和投资

---

**教训3：依赖贸易=需要和平与稳定**

**19世纪的挑战：**
- **海盗**威胁航运路线
- **政治不稳定**（马来亚、中国的战争）
- **帝国竞争**（英国对荷兰）

新加坡繁荣是因为英国海军和Pax Britannica（英国和平）提供了相对稳定。

**今天的应用：**
新加坡仍然依赖：
- **开放的海上航道**（马六甲海峡）
- **全球稳定**：战争破坏贸易
- **国际法**：保护航运和贸易

这就是为什么新加坡：
- 保持强大的国防（全面防卫）
- 支持国际法和机构（联合国、世界贸易组织）
- 与许多国家保持良好关系（朋友对所有人）

---

**教训4：快速增长带来社会挑战**

**19世纪的问题：**
- **住房短缺**：贫民窟、过度拥挤
- **公共卫生危机**：霍乱、疟疾
- **社会紧张**：秘密会社暴力、种族冲突
- **环境退化**：沼泽填平、森林砍伐

**殖民政府的回应：**
- **基础设施**：道路、供水、医院
- **法律和秩序**：警察、法规
- **城市规划**：分区（尽管种族隔离）

**但许多问题持续到独立后！**

**现代教训：**
独立后的新加坡政府从殖民失败中吸取教训：
- **组屋计划**：为所有人提供优质住房
- **清洁水和卫生**：世界级的公共卫生
- **绿色城市**：花园城市政策
- **种族和谐**：民族融合政策，防止种族飞地

---

**教训5：全球联系创造机遇和脆弱性**

**19世纪：**
- 全球橡胶需求 → 新加坡繁荣
- 1929年大萧条 → 新加坡贸易崩溃
- 第二次世界大战 → 日本占领破坏经济

**今天：**
- 全球经济增长 → 新加坡繁荣
- 2008年金融危机 → 新加坡GDP下降
- COVID-19大流行 → 贸易和旅游业中断

**韧性策略：:**
- **经济多元化**：不仅仅依赖一个行业
- **储备**：为危机储蓄（淡马锡、GIC）
- **适应性**：快速应对变化的能力

---

**最后的反思：**

**连续性：**
- 新加坡仍然是一个转口贸易港（石油、电子产品）
- 仍然依赖自由贸易和开放
- 仍然是多元文化和国际化的
- 仍然缺乏自然资源——依赖连接和服务

**变化：**
- 从初级商品（锡、橡胶）到高科技（电子产品、金融）
- 从殖民地到独立国家
- 从贫民窟到世界级的住房
- 从被动角色到主动塑造自己的未来

新加坡从1819年到今天的旅程展示了**战略思维、良好治理和适应性**如何将一个小岛变成一个全球城市。过去的教训继续指导新加坡的未来！"""
    }
}

def add_chinese_content():
    """Add Chinese content to remaining History chapters"""
    
    content_path = 'src/data/content.json'
    
    # Create backup
    create_backup(content_path)
    
    # Load content
    with open(content_path, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    # Find History subject
    history_subject = None
    for subject in data['subjects']:
        if subject['id'] == 'history':
            history_subject = subject
            break
    
    if not history_subject:
        print("❌ History subject not found!")
        return
    
    total_updated = 0
    
    # Update chapters
    for chapter in history_subject['chapters']:
        chapter_id = chapter['id']
        
        if chapter_id in CHINESE_CONTENT:
            print(f"\n📝 Processing chapter: {chapter['title']}")
            chinese_sections = CHINESE_CONTENT[chapter_id]
            
            for section in chapter.get('sections', []):
                section_id = section['id']
                if section_id in chinese_sections:
                    section['content_zh'] = chinese_sections[section_id]
                    total_updated += 1
                    print(f"   ✅ Added content_zh to: {section['title']}")
    
    # Save updated content
    with open(content_path, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)
    
    print(f"\n🎉 Integration complete!")
    print(f"📊 Updated {total_updated} sections with Chinese content")
    print(f"💾 Saved to: {content_path}")
    print(f"\n✨ Chapters 2-3 now have Chinese translations!")
    print(f"⏳ Note: Chapters 4-5 still need Chinese content")

if __name__ == '__main__':
    add_chinese_content()
