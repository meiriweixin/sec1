const fs = require('fs');
const path = require('path');

// Read the content.json file
const contentPath = path.join(__dirname, 'src', 'data', 'content.json');
const content = JSON.parse(fs.readFileSync(contentPath, 'utf8'));

// Find the English subject
const englishSubject = content.subjects.find(s => s.id === 'english');
if (!englishSubject) {
  console.error('English subject not found!');
  process.exit(1);
}

// Find the editing-proofreading chapter
const chapter = englishSubject.chapters.find(c => c.id === 'editing-proofreading');
if (!chapter) {
  console.error('Editing-proofreading chapter not found!');
  process.exit(1);
}

console.log(`Found chapter: ${chapter.title}`);
console.log(`Current sections count: ${chapter.sections.length}`);

// Replace the sections array with expanded content
chapter.sections = [
  {
    "id": "grammar-punctuation-errors",
    "type": "text",
    "title": "Common Grammar and Punctuation Errors",
    "title_zh": "常见语法和标点错误",
    "content": "Watch out for these frequent mistakes:\n\n1. SUBJECT-VERB AGREEMENT: Subject and verb must match in number.\n   Wrong: 'The students at my school goes to the library.'\n   Right: 'The students at my school go to the library.'\n   (Plural subject 'students' needs plural verb 'go')\n\n2. PRONOUN ERRORS: Use correct pronoun case.\n   Wrong: 'Me and him went to Orchard Road.'\n   Right: 'He and I went to Orchard Road.'\n   (Subjects need 'I' and 'he', not 'me' and 'him')\n\n3. APOSTROPHE MISUSE:\n   - its = possessive (The HDB flat has its own playground)\n   - it's = it is (It's a sunny day in Singapore)\n   - Don't use apostrophes for plurals: 'MRT trains' not 'MRT train's'\n\n4. COMMA SPLICES: Don't join two complete sentences with just a comma.\n   Wrong: 'I love laksa, it's my favorite food.'\n   Right: 'I love laksa. It's my favorite food.' OR 'I love laksa because it's my favorite food.'\n\n5. SENTENCE FRAGMENTS: Every sentence needs subject and verb.\n   Wrong: 'After taking the MRT to school.'\n   Right: 'After taking the MRT to school, I met my friends.'",
    "content_zh": "注意这些常见错误：\n\n1. 主谓一致：主语和动词必须在数上一致。\n   错误：'The students at my school goes to the library.'\n   正确：'The students at my school go to the library.'\n   （复数主语'students'需要复数动词'go'）\n\n2. 代词错误：使用正确的代词格。\n   错误：'Me and him went to Orchard Road.'\n   正确：'He and I went to Orchard Road.'\n   （主语需要'I'和'he'，不是'me'和'him'）\n\n3. 撇号误用：\n   - its = 所有格（The HDB flat has its own playground）\n   - it's = it is（It's a sunny day in Singapore）\n   - 不要在复数中使用撇号：'MRT trains'而不是'MRT train's'\n\n4. 逗号粘连：不要只用逗号连接两个完整的句子。\n   错误：'I love laksa, it's my favorite food.'\n   正确：'I love laksa. It's my favorite food.' 或'I love laksa because it's my favorite food.'\n\n5. 句子片段：每个句子都需要主语和动词。\n   错误：'After taking the MRT to school.'\n   正确：'After taking the MRT to school, I met my friends.'"
  },
  {
    "id": "grammar-punctuation-example",
    "type": "example",
    "title": "Example: Correcting Grammar and Punctuation",
    "title_zh": "例子：纠正语法和标点",
    "content": "Let's proofread and correct a paragraph about a school trip:\n\nORIGINAL (with errors):\n'Last week, me and my classmates goes to the Singapore Zoo. It was a amazing experience, we seen many animals. The pandas was really cute, they was eating bamboo. After the zoo, we went to a hawker center. Their food is delicious, I tried chicken rice it's my favorite now.'\n\nSTEP-BY-STEP CORRECTIONS:\n\n1. 'me and my classmates goes' → 'my classmates and I went'\n   (Pronoun case: 'I' not 'me' + subject-verb agreement: plural needs 'went')\n\n2. 'a amazing' → 'an amazing'\n   (Use 'an' before vowel sounds)\n\n3. 'experience, we seen' → 'experience. We saw' OR 'experience, and we saw'\n   (Fix comma splice + correct verb form: 'saw' not 'seen')\n\n4. 'The pandas was' → 'The pandas were'\n   (Plural subject needs plural verb)\n\n5. 'they was eating' → 'they were eating'\n   (Plural pronoun needs 'were')\n\n6. 'Their food' → 'The food there' OR keep 'Their food'\n   (Context: if 'Their' means hawker center's food, it's correct. If you meant location 'there', change it)\n\n7. 'chicken rice it's' → 'chicken rice. It's' OR 'chicken rice, and it's'\n   (Fix run-on sentence)\n\nCORRECTED VERSION:\n'Last week, my classmates and I went to the Singapore Zoo. It was an amazing experience, and we saw many animals. The pandas were really cute. They were eating bamboo. After the zoo, we went to a hawker center. The food there was delicious. I tried chicken rice, and it's my favorite now.'\n\nPROOFREADING TIPS:\n- Read aloud to catch awkward phrases\n- Check each sentence for subject and verb\n- Look for homophones (their/there/they're)\n- Verify comma usage between sentences",
    "content_zh": "让我们校对和纠正一段关于学校旅行的段落：\n\n原文（有错误）：\n'Last week, me and my classmates goes to the Singapore Zoo. It was a amazing experience, we seen many animals. The pandas was really cute, they was eating bamboo. After the zoo, we went to a hawker center. Their food is delicious, I tried chicken rice it's my favorite now.'\n\n逐步修正：\n\n1. 'me and my classmates goes' → 'my classmates and I went'\n   （代词格：'I'不是'me' + 主谓一致：复数需要'went'）\n\n2. 'a amazing' → 'an amazing'\n   （在元音前使用'an'）\n\n3. 'experience, we seen' → 'experience. We saw'或'experience, and we saw'\n   （修正逗号粘连 + 正确动词形式：'saw'不是'seen'）\n\n4. 'The pandas was' → 'The pandas were'\n   （复数主语需要复数动词）\n\n5. 'they was eating' → 'they were eating'\n   （复数代词需要'were'）\n\n6. 'Their food' → 'The food there'或保持'Their food'\n   （上下文：如果'Their'指小贩中心的食物，是正确的。如果你指地点'there'，改变它）\n\n7. 'chicken rice it's' → 'chicken rice. It's'或'chicken rice, and it's'\n   （修正连写句）\n\n修正版本：\n'Last week, my classmates and I went to the Singapore Zoo. It was an amazing experience, and we saw many animals. The pandas were really cute. They were eating bamboo. After the zoo, we went to a hawker center. The food there was delicious. I tried chicken rice, and it's my favorite now.'\n\n校对技巧：\n- 大声朗读以发现不自然的短语\n- 检查每个句子的主语和动词\n- 寻找同音词（their/there/they're）\n- 验证句子间的逗号使用"
  },
  {
    "id": "homophones-spelling",
    "type": "text",
    "title": "Homophones and Common Spelling Errors",
    "title_zh": "同音词和常见拼写错误",
    "content": "HOMOPHONES are words that sound the same but have different meanings and spellings. They're major sources of errors!\n\nCOMMON HOMOPHONES TO MASTER:\n\n1. THEIR / THERE / THEY'RE\n   - THEIR = possessive (Their HDB flat is on the 5th floor)\n   - THERE = location (The MRT station is over there)\n   - THEY'RE = they are (They're going to school)\n\n2. YOUR / YOU'RE\n   - YOUR = possessive (Is this your textbook?)\n   - YOU'RE = you are (You're doing great!)\n\n3. ITS / IT'S\n   - ITS = possessive (The school has its own library)\n   - IT'S = it is (It's raining in Singapore)\n\n4. TO / TOO / TWO\n   - TO = direction/infinitive (Go to the library / I want to read)\n   - TOO = also/excessive (Me too! / It's too hot)\n   - TWO = number (Two students)\n\n5. AFFECT / EFFECT\n   - AFFECT = verb (The weather affects my mood)\n   - EFFECT = noun (The effect was immediate)\n\n6. THAN / THEN\n   - THAN = comparison (Taller than my brother)\n   - THEN = time sequence (First study, then play)\n\nCOMMON SPELLING MISTAKES:\n- receive (not recieve) - remember 'i before e except after c'\n- definitely (not definately)\n- necessary (not neccessary) - one 'c', two 's'\n- separate (not seperate) - there's 'a rat' in separate\n- tomorrow (not tommorrow/tommorow) - one 'm', two 'r's\n\nPROOFREADING TIP: Your spell checker won't catch homophones! Read carefully and think about word meanings.",
    "content_zh": "同音词是发音相同但意思和拼写不同的词。它们是错误的主要来源！\n\n要掌握的常见同音词：\n\n1. THEIR / THERE / THEY'RE\n   - THEIR = 所有格（Their HDB flat is on the 5th floor）\n   - THERE = 位置（The MRT station is over there）\n   - THEY'RE = they are（They're going to school）\n\n2. YOUR / YOU'RE\n   - YOUR = 所有格（Is this your textbook?）\n   - YOU'RE = you are（You're doing great!）\n\n3. ITS / IT'S\n   - ITS = 所有格（The school has its own library）\n   - IT'S = it is（It's raining in Singapore）\n\n4. TO / TOO / TWO\n   - TO = 方向/不定式（Go to the library / I want to read）\n   - TOO = 也/过度（Me too! / It's too hot）\n   - TWO = 数字（Two students）\n\n5. AFFECT / EFFECT\n   - AFFECT = 动词（The weather affects my mood）\n   - EFFECT = 名词（The effect was immediate）\n\n6. THAN / THEN\n   - THAN = 比较（Taller than my brother）\n   - THEN = 时间顺序（First study, then play）\n\n常见拼写错误：\n- receive（不是recieve）- 记住'i before e except after c'\n- definitely（不是definately）\n- necessary（不是neccessary）- 一个'c'，两个's'\n- separate（不是seperate）- separate中有'a rat'\n- tomorrow（不是tommorrow/tommorow）- 一个'm'，两个'r'\n\n校对技巧：拼写检查器不会发现同音词！仔细阅读并思考词义。"
  },
  {
    "id": "homophones-spelling-example",
    "type": "example",
    "title": "Example: Correcting Homophones and Spelling",
    "title_zh": "例子：纠正同音词和拼写",
    "content": "Let's identify and correct homophone and spelling errors in this paragraph about shopping:\n\nORIGINAL (with errors):\n'Last Saturday, me and my mum went too the shopping mall in Orchard Road. We wanted too buy some new cloths for Chinese New Year. The mall was more crowded then usual. Their were many people shopping four the holiday. We spent two hours they're before going home. Its definitly my favorite place too shop because the variety of stores has a positive affect on my mood. Your going too love it when you visit!'\n\nIDENTIFYING ERRORS:\n\n1. 'too the shopping mall' → 'to the shopping mall'\n   (TO for direction, not TOO)\n\n2. 'wanted too buy' → 'wanted to buy'\n   (TO for infinitive verb)\n\n3. 'new cloths' → 'new clothes'\n   (CLOTHES = garments; CLOTHS = pieces of fabric for cleaning)\n\n4. 'more crowded then usual' → 'more crowded than usual'\n   (THAN for comparison)\n\n5. 'Their were' → 'There were'\n   (THERE for existence/location)\n\n6. 'shopping four the holiday' → 'shopping for the holiday'\n   (FOR = purpose; FOUR = number 4)\n\n7. 'two hours they're' → 'two hours there'\n   (THERE = location; THEY'RE = they are doesn't make sense)\n\n8. 'Its definitly' → 'It's definitely'\n   (IT'S = it is + spelling: definitely not definately)\n\n9. 'too shop' → 'to shop'\n   (TO for infinitive)\n\n10. 'positive affect' → 'positive effect'\n    (EFFECT = noun result)\n\n11. 'Your going' → 'You're going'\n    (YOU'RE = you are)\n\n12. 'going too love' → 'going to love'\n    (TO for infinitive)\n\nCORRECTED VERSION:\n'Last Saturday, my mum and I went to the shopping mall in Orchard Road. We wanted to buy some new clothes for Chinese New Year. The mall was more crowded than usual. There were many people shopping for the holiday. We spent two hours there before going home. It's definitely my favorite place to shop because the variety of stores has a positive effect on my mood. You're going to love it when you visit!'\n\nPROOFREADING STRATEGY:\n1. Read sentence by sentence\n2. Pause at each their/there/they're, your/you're, to/too/two\n3. Ask: Which meaning do I need here?\n4. Check spelling of common error words\n5. Read aloud - does it sound right?",
    "content_zh": "让我们识别并纠正这段关于购物的段落中的同音词和拼写错误：\n\n原文（有错误）：\n'Last Saturday, me and my mum went too the shopping mall in Orchard Road. We wanted too buy some new cloths for Chinese New Year. The mall was more crowded then usual. Their were many people shopping four the holiday. We spent two hours they're before going home. Its definitly my favorite place too shop because the variety of stores has a positive affect on my mood. Your going too love it when you visit!'\n\n识别错误：\n\n1. 'too the shopping mall' → 'to the shopping mall'\n   （TO表方向，不是TOO）\n\n2. 'wanted too buy' → 'wanted to buy'\n   （TO用于不定式动词）\n\n3. 'new cloths' → 'new clothes'\n   （CLOTHES = 衣服；CLOTHS = 清洁用的布）\n\n4. 'more crowded then usual' → 'more crowded than usual'\n   （THAN用于比较）\n\n5. 'Their were' → 'There were'\n   （THERE表存在/位置）\n\n6. 'shopping four the holiday' → 'shopping for the holiday'\n   （FOR = 目的；FOUR = 数字4）\n\n7. 'two hours they're' → 'two hours there'\n   （THERE = 位置；THEY'RE = they are不合理）\n\n8. 'Its definitly' → 'It's definitely'\n   （IT'S = it is + 拼写：definitely不是definately）\n\n9. 'too shop' → 'to shop'\n   （TO用于不定式）\n\n10. 'positive affect' → 'positive effect'\n    （EFFECT = 名词结果）\n\n11. 'Your going' → 'You're going'\n    （YOU'RE = you are）\n\n12. 'going too love' → 'going to love'\n    （TO用于不定式）\n\n修正版本：\n'Last Saturday, my mum and I went to the shopping mall in Orchard Road. We wanted to buy some new clothes for Chinese New Year. The mall was more crowded than usual. There were many people shopping for the holiday. We spent two hours there before going home. It's definitely my favorite place to shop because the variety of stores has a positive effect on my mood. You're going to love it when you visit!'\n\n校对策略：\n1. 逐句阅读\n2. 在每个their/there/they're、your/you're、to/too/two处停顿\n3. 问：我这里需要哪个意思？\n4. 检查常见错误词的拼写\n5. 大声朗读 - 听起来对吗？"
  },
  {
    "id": "proofreading-strategies",
    "type": "text",
    "title": "Effective Proofreading Strategies",
    "title_zh": "有效的校对策略",
    "content": "PROOFREADING is the final check for errors before submitting your work. It's different from editing (which focuses on content and structure).\n\nEFFECTIVE PROOFREADING TECHNIQUES:\n\n1. TAKE A BREAK: Wait at least 15-30 minutes after writing. Fresh eyes catch more errors!\n\n2. READ ALOUD: Speak each word. Your ears catch mistakes your eyes miss. If you stumble or it sounds awkward, there's likely an error.\n\n3. READ BACKWARDS: Start from the last sentence and work backwards. This prevents your brain from 'auto-correcting' errors because you're not following the flow.\n\n4. PRINT IT OUT: Errors are easier to spot on paper than on screen.\n\n5. USE THE FINGER METHOD: Point at each word as you read. This slows you down and ensures you see every word.\n\n6. CHECK ONE TYPE OF ERROR AT A TIME:\n   - First pass: Subject-verb agreement\n   - Second pass: Punctuation\n   - Third pass: Homophones\n   - Fourth pass: Spelling\n\n7. LOOK FOR YOUR COMMON MISTAKES: Keep a list of errors you make frequently and specifically check for those.\n\n8. USE TECHNOLOGY WISELY: Spell checkers help but aren't perfect. They won't catch:\n   - Homophones (their/there/they're)\n   - Real words used incorrectly (from/form)\n   - Missing words\n\nPROOFREADING CHECKLIST:\n[ ] Subject-verb agreement correct?\n[ ] All sentences complete (no fragments)?\n[ ] Punctuation used correctly?\n[ ] Homophones checked (their/there/they're, your/you're, its/it's)?\n[ ] Spelling verified (especially commonly misspelled words)?\n[ ] Capitalization correct?\n[ ] Consistent tense throughout?\n[ ] Read aloud - does it sound natural?\n\nREMEMBER: Even professional writers make mistakes in first drafts. Proofreading is essential!",
    "content_zh": "校对是提交作品前的最后检查错误。它与编辑不同（编辑侧重于内容和结构）。\n\n有效的校对技巧：\n\n1. 休息一下：写完后至少等15-30分钟。新鲜的眼睛能发现更多错误！\n\n2. 大声朗读：说出每个词。你的耳朵会发现你的眼睛漏掉的错误。如果你磕绊或听起来不自然，可能有错误。\n\n3. 倒着读：从最后一句开始向前读。这防止你的大脑'自动纠正'错误，因为你没有跟随流畅度。\n\n4. 打印出来：纸上的错误比屏幕上更容易发现。\n\n5. 使用手指法：阅读时指着每个词。这让你慢下来并确保你看到每个词。\n\n6. 一次检查一种错误类型：\n   - 第一遍：主谓一致\n   - 第二遍：标点\n   - 第三遍：同音词\n   - 第四遍：拼写\n\n7. 寻找你常犯的错误：列出你经常犯的错误并专门检查这些。\n\n8. 明智地使用技术：拼写检查器有帮助但不完美。它们不会发现：\n   - 同音词（their/there/they're）\n   - 不正确使用的真实单词（from/form）\n   - 缺失的词\n\n校对清单：\n[ ] 主谓一致正确？\n[ ] 所有句子完整（没有片段）？\n[ ] 标点使用正确？\n[ ] 同音词检查（their/there/they're、your/you're、its/it's）？\n[ ] 拼写验证（特别是常见拼写错误的词）？\n[ ] 大写正确？\n[ ] 全文时态一致？\n[ ] 大声朗读 - 听起来自然吗？\n\n记住：即使是专业作家在初稿中也会犯错。校对是必不可少的！"
  },
  {
    "id": "proofreading-strategies-example",
    "type": "example",
    "title": "Example: Applying Proofreading Strategies",
    "title_zh": "例子：应用校对策略",
    "content": "Let's practice systematic proofreading on a paragraph about Singapore's public transport:\n\nORIGINAL DRAFT:\n'singapore has one of the best public transport system in the world. The MRT trains is always on time and their very clean. Its so convenient you can go too any part of the city quickly. The bus services are also excellent they runs frequently. When I travel with my freinds, we always uses public transport because its cheaper then taking a taxi. The EZ-Link card make it easy too pay for both buses and trains. Everyone whose visited Singapore agrees that are public transport is efficient.'\n\nPROOFREADING STEP-BY-STEP:\n\nPASS 1 - CAPITALIZATION & BASIC ERRORS:\n- 'singapore' → 'Singapore' (proper noun needs capital)\n- 'system' → 'systems' (agreement with 'one of')\n\nPASS 2 - SUBJECT-VERB AGREEMENT:\n- 'The MRT trains is' → 'The MRT trains are' (plural subject)\n- 'services are also excellent they runs' → 'they run' (plural)\n- 'we always uses' → 'we always use' (plural 'we')\n- 'card make' → 'card makes' (singular subject)\n- 'Everyone whose visited' → 'Everyone who has visited' (singular 'everyone')\n\nPASS 3 - HOMOPHONES:\n- 'their very clean' → 'they're very clean' (they are)\n- 'Its so convenient' → 'It's so convenient' (it is)\n- 'go too any' → 'go to any' (direction)\n- 'easy too pay' → 'easy to pay' (infinitive)\n- 'cheaper then' → 'cheaper than' (comparison)\n- 'its cheaper' → 'it's cheaper' (it is)\n- 'are public' → 'our public' (possessive)\n\nPASS 4 - PUNCTUATION:\n- 'excellent they runs' → 'excellent. They run' (separate sentences)\n\nPASS 5 - SPELLING:\n- 'freinds' → 'friends' (common spelling error)\n\nPASS 6 - WORD CHOICE:\n- 'whose visited' → 'who has visited' (relative pronoun)\n\nCORRECTED FINAL VERSION:\n'Singapore has one of the best public transport systems in the world. The MRT trains are always on time and they're very clean. It's so convenient - you can go to any part of the city quickly. The bus services are also excellent. They run frequently. When I travel with my friends, we always use public transport because it's cheaper than taking a taxi. The EZ-Link card makes it easy to pay for both buses and trains. Everyone who has visited Singapore agrees that our public transport is efficient.'\n\nLESSONS LEARNED:\n1. Multiple passes catch more errors than one quick read\n2. Reading aloud helps catch subject-verb disagreement\n3. Homophones require careful attention to meaning\n4. Taking time to proofread systematically improves quality\n\nTRY THIS: Set a timer for 5 minutes and proofread using this method. You'll be amazed how many errors you find!",
    "content_zh": "让我们练习系统地校对一段关于新加坡公共交通的段落：\n\n原始草稿：\n'singapore has one of the best public transport system in the world. The MRT trains is always on time and their very clean. Its so convenient you can go too any part of the city quickly. The bus services are also excellent they runs frequently. When I travel with my freinds, we always uses public transport because its cheaper then taking a taxi. The EZ-Link card make it easy too pay for both buses and trains. Everyone whose visited Singapore agrees that are public transport is efficient.'\n\n逐步校对：\n\n第1遍 - 大写和基本错误：\n- 'singapore' → 'Singapore'（专有名词需要大写）\n- 'system' → 'systems'（与'one of'一致）\n\n第2遍 - 主谓一致：\n- 'The MRT trains is' → 'The MRT trains are'（复数主语）\n- 'services are also excellent they runs' → 'they run'（复数）\n- 'we always uses' → 'we always use'（复数'we'）\n- 'card make' → 'card makes'（单数主语）\n- 'Everyone whose visited' → 'Everyone who has visited'（单数'everyone'）\n\n第3遍 - 同音词：\n- 'their very clean' → 'they're very clean'（they are）\n- 'Its so convenient' → 'It's so convenient'（it is）\n- 'go too any' → 'go to any'（方向）\n- 'easy too pay' → 'easy to pay'（不定式）\n- 'cheaper then' → 'cheaper than'（比较）\n- 'its cheaper' → 'it's cheaper'（it is）\n- 'are public' → 'our public'（所有格）\n\n第4遍 - 标点：\n- 'excellent they runs' → 'excellent. They run'（分开句子）\n\n第5遍 - 拼写：\n- 'freinds' → 'friends'（常见拼写错误）\n\n第6遍 - 词汇选择：\n- 'whose visited' → 'who has visited'（关系代词）\n\n修正的最终版本：\n'Singapore has one of the best public transport systems in the world. The MRT trains are always on time and they're very clean. It's so convenient - you can go to any part of the city quickly. The bus services are also excellent. They run frequently. When I travel with my friends, we always use public transport because it's cheaper than taking a taxi. The EZ-Link card makes it easy to pay for both buses and trains. Everyone who has visited Singapore agrees that our public transport is efficient.'\n\n学到的教训：\n1. 多遍检查比一次快速阅读发现更多错误\n2. 大声朗读有助于发现主谓不一致\n3. 同音词需要仔细注意意思\n4. 花时间系统地校对提高质量\n\n试试这个：设置5分钟计时器并使用这种方法校对。你会惊讶于发现了多少错误！"
  }
];

console.log(`Updated sections count: ${chapter.sections.length}`);

// Write the updated content back to file
fs.writeFileSync(contentPath, JSON.stringify(content, null, 2), 'utf8');

console.log('Successfully updated the editing-proofreading chapter!');
console.log('New sections:');
chapter.sections.forEach((section, index) => {
  console.log(`  ${index + 1}. ${section.title} (${section.type})`);
});
