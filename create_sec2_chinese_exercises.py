import json

# Load the chapters
with open('chapters/sec2-chinese-chapters.json', 'r', encoding='utf-8') as f:
    chapters = json.load(f)

# Exercise data for all 6 chapters (Chinese exercises in Chinese)
exercise_data = {
    "advanced-grammar-sec2": [
        # Easy (1-5)
        ("选出正确的关联词：___天气很热，___我们还是要上体育课。",
         ["不但...而且", "虽然...但是", "因为...所以", "只要...就"],
         1, "mcq", "easy"),
        ("选出正确的被动句：",
         ["弟弟撕破了书。", "书被弟弟撕破了。", "弟弟把书撕破。", "书撕破了。"],
         1, "mcq", "easy"),
        ("哪个句子使用了使动句？",
         ["老师很高兴。", "老师走进教室。", "老师让我们写作文。", "老师在批改作业。"],
         2, "mcq", "easy"),
        ("选出语序正确的句子：",
         ["我在图书馆昨天复习功课。", "昨天我在图书馆复习功课。", "我昨天复习功课在图书馆。", "在图书馆我昨天复习功课。"],
         1, "mcq", "easy"),
        ("选出正确的因果关系关联词：___下大雨，___比赛取消了。",
         ["虽然...但是", "不但...而且", "因为...所以", "如果...就"],
         2, "mcq", "easy"),
        # Medium (6-10)
        ("选出错误的复句：",
         ["不但他会说华语，而且会写华文。", "虽然天气很热，但是我们还要训练。", "因为他生病了，所以没来上课。", "如果明天下雨，所以运动会取消。"],
         3, "mcq", "medium"),
        ("把主动句改为被动句：\"妈妈批评了我。\" 正确的是：",
         ["妈妈被我批评了。", "我被妈妈批评了。", "批评了我的妈妈。", "我批评了妈妈。"],
         1, "mcq", "medium"),
        ("选出使动句使用错误的句子：",
         ["这个消息使大家很高兴。", "老师让我们做作业。", "他使我很生气。", "书包使我背。"],
         3, "mcq", "medium"),
        ("在新加坡，多个状语的正确语序是：\"我___在地铁站___认真地___看书。\" 填入：A-昨天 B-站着 C-___",
         ["C-A-B", "A-B-C", "B-A-C", "A-C-B"],
         0, "mcq", "medium"),
        ("选出关联词使用最恰当的句子：",
         ["只要努力学习，就一定会进步。", "只要努力学习，而且一定会进步。", "只要努力学习，所以一定会进步。", "只要努力学习，虽然一定会进步。"],
         0, "mcq", "medium"),
        # Hard (11-15)
        ("分析这个句子的错误：\"虽然新加坡是个小国，所以但是发展很成功。\"",
         ["关联词重复使用，应删除'所以'", "缺少主语", "时态错误", "标点错误"],
         0, "mcq", "hard"),
        ("选出被动句和使动句都使用正确的句子组：",
         ["A-他被老师表扬了。B-这件事让我很感动。", "A-他表扬了老师。B-我感动了这件事。", "A-老师被他表扬。B-我让这件事感动。", "A-他让老师表扬。B-这件事被我感动。"],
         0, "mcq", "hard"),
        ("改正这个句子的语序错误：\"我在小贩中心每天早上吃早餐。\"最佳修改是：",
         ["我每天早上在小贩中心吃早餐。", "在小贩中心我每天早上吃早餐。", "每天早上我吃早餐在小贩中心。", "我吃早餐每天早上在小贩中心。"],
         0, "mcq", "hard"),
        ("分析复句：\"不但新加坡的教育水平高，而且医疗系统也很完善，因此吸引了很多外国人才。\" 这个句子使用了：",
         ["递进关系和因果关系", "只有递进关系", "只有因果关系", "转折关系和递进关系"],
         0, "mcq", "hard"),
        ("选出语法结构最复杂且正确的句子（包含被动、使动和复句）：",
         ["他学习很好，成绩优秀。", "虽然这次考试很难，但是我被老师表扬了，这使我很有信心继续努力。", "他去图书馆看书。", "我们一起做作业。"],
         1, "mcq", "hard"),
    ],
    "reading-comprehension-advanced-sec2": [
        # Easy (1-5)
        ("句子\"新加坡像一颗璀璨的明珠\"使用了什么修辞手法？",
         ["拟人", "比喻", "排比", "设问"],
         1, "mcq", "easy"),
        ("\"春风轻轻地抚摸着大地\"使用了什么修辞手法？",
         ["比喻", "拟人", "夸张", "反问"],
         1, "mcq", "easy"),
        ("阅读：\"他看着窗外的大雨，叹了口气。\" 可以推断他的心情是：",
         ["高兴", "失望或无奈", "兴奋", "害怕"],
         1, "mcq", "easy"),
        ("哪个句子使用了设问的修辞手法？",
         ["新加坡很美丽。", "新加坡为什么这么美丽？因为人民爱护环境。", "新加坡真美丽啊！", "我喜欢新加坡。"],
         1, "mcq", "easy"),
        ("\"难道这不是我们应该做的吗？\"使用了什么修辞手法？",
         ["设问", "反问", "比喻", "拟人"],
         1, "mcq", "easy"),
        # Medium (6-10)
        ("阅读片段：\"李明紧紧地握着拳头，额头上冒出了汗珠，眼睛死死地盯着成绩单。\" 这段描写主要表现了：",
         ["李明很热", "李明很紧张或担心", "李明很生气", "李明很累"],
         1, "mcq", "medium"),
        ("分析句子：\"我们要爱护环境，保护地球，珍惜资源。\" 这个句子使用排比的作用是：",
         ["使句子更长", "增强语气，使表达更有力", "使句子更复杂", "没有作用"],
         1, "mcq", "medium"),
        ("阅读：\"虽然已经是晚上九点，图书馆里依然灯火通明，许多学生还在埋头苦读。\" 可以推断出：",
         ["学生们很懒惰", "考试季节或学生们学习很努力", "图书馆很贵", "学生们在玩"],
         1, "mcq", "medium"),
        ("文章开头写：\"天空乌云密布，狂风呼啸。\" 这个环境描写的作用最可能是：",
         ["说明天气不好", "烘托紧张或不祥的气氛，预示将发生不好的事", "描写美景", "说明季节"],
         1, "mcq", "medium"),
        ("判断：\"他紧张地咬着嘴唇，手心都出汗了，不停地看着手表。\" 这段文字使用了哪种描写方法？",
         ["语言描写", "外貌描写", "动作和神态描写", "心理描写"],
         2, "mcq", "medium"),
        # Hard (11-15)
        ("阅读片段：\"新加坡的组屋整齐划一，就像一个个巨大的火柴盒。虽然空间不大，但里面装满了温暖和欢笑。\" 分析作者的写作手法和态度：",
         ["作者批评组屋太小", "作者用比喻描写组屋外观，但强调其中的温情，表达对组屋生活的肯定", "作者不喜欢组屋", "作者只是客观描述"],
         1, "mcq", "hard"),
        ("分析修辞效果：\"小贩中心里，煮炒的声音、小贩的叫卖声、顾客的交谈声，汇成了一曲独特的交响乐。\" 这个比喻的妙处在于：",
         ["说明声音很吵", "把各种声音比作交响乐，生动地表现了小贩中心热闹、有活力的特点", "说明音乐很好听", "没有特别之处"],
         1, "mcq", "hard"),
        ("阅读：\"考试成绩公布了。有的同学欢呼雀跃，有的同学低头不语，有的同学紧咬嘴唇。\" 从这段描写可以推断出：",
         ["所有同学都很高兴", "成绩有好有坏，同学们的反应各不相同，反映了不同的考试结果", "同学们都不在乎成绩", "考试很简单"],
         1, "mcq", "hard"),
        ("文章开头用倒叙手法：\"当我站在领奖台上时，眼眶湿润了，回想起这一年来的努力...\" 这种写作手法的作用是：",
         ["使文章更长", "设置悬念，引起读者兴趣，突出成功来之不易", "使故事更复杂", "没有作用"],
         1, "mcq", "hard"),
        ("综合分析：文章描写一位年迈的清洁工人，先写他弯曲的背影（外貌），再写他仔细清扫的动作（动作），最后写他说'只要大家都做好本分，新加坡就会更美'（语言）。这种多角度描写的作用是：",
         ["使文章更长", "从多个角度塑造人物形象，表现清洁工人的敬业精神和爱国情怀", "重复啰嗦", "没有意义"],
         1, "mcq", "hard"),
    ],
    "composition-narrative-sec2": [
        # Easy (1-5)
        ("选出最好的细节描写：\"他很生气。\"应该改为：",
         ["他非常生气。", "他特别生气。", "他的脸涨得通红，双手紧握成拳，眼睛瞪得大大的。", "他真的很生气。"],
         2, "mcq", "easy"),
        ("记叙文的四个部分是：",
         ["开端、发展、高潮、结局", "开头、中间、结尾、总结", "起因、经过、转折、结束", "引子、正文、高潮、尾声"],
         0, "mcq", "easy"),
        ("对话格式中，每个人说话应该：",
         ["写在同一段", "另起一段", "用逗号分开", "不用分段"],
         1, "mcq", "easy"),
        ("哪个提示语最生动？",
         ["他说", "他高兴地说", "他讲", "他表示"],
         1, "mcq", "easy"),
        ("记叙文开头可以用：",
         ["环境描写", "对话", "直接叙事", "以上都可以"],
         3, "mcq", "easy"),
        # Medium (6-10)
        ("改进这段对话：\"我去图书馆。妈妈说。好的。我说。\" 最佳改写是：",
         ["\"我去图书馆。\"妈妈说。\"好的。\"我说。", "\"我去图书馆，\"妈妈说，\"好的，\"我说。", "\"我去图书馆。\"妈妈说。\n\"好的。\"我回答。", "我去图书馆，妈妈说好的。"],
         2, "mcq", "medium"),
        ("在记叙文中，哪个部分应该详写？",
         ["开端", "高潮部分", "所有部分都详写", "结局"],
         1, "mcq", "medium"),
        ("环境描写\"烈日当空，树上的知了不停地叫\"在记叙文中的作用是：",
         ["只是描写天气", "烘托炎热的气氛，可能暗示人物的烦躁心情", "凑字数", "没有作用"],
         1, "mcq", "medium"),
        ("判断：\"'孩子，不要紧张，尽力就好。'妈妈温柔地说。\" 这段对话好在哪里？",
         ["只有对话内容", "有提示语但很普通", "提示语'温柔地'体现了妈妈的关爱，符合人物身份", "对话太长"],
         2, "mcq", "medium"),
        ("记叙文要做到首尾呼应，例如开头写\"天空飘着细雨\"，结尾最好：",
         ["写完全不同的内容", "再次提到天气，如'雨停了，天空出现了彩虹'", "不用提天气", "重复开头一模一样"],
         1, "mcq", "medium"),
        # Hard (11-15)
        ("分析这段描写的问题：\"那是一个下午，在学校，我和同学，我们去图书馆，因为要温习，所以去图书馆。\" 主要问题是：",
         ["太短", "啰嗦重复，语言不简练，缺乏细节描写", "没有错误", "太长"],
         1, "mcq", "hard"),
        ("评价这个记叙文结构：\"开端3行、发展5行、高潮2行、结局4行\" 的问题是：",
         ["结局太长", "高潮部分太短，应该详细描写，这是详略不当", "开端太短", "没有问题"],
         1, "mcq", "hard"),
        ("对比两段描写小贩中心的文字，哪段更好？\nA: 小贩中心很热闹，有很多人，有很多食物。\nB: 小贩中心人声鼎沸，煮炒的香味混合着咖喱的辛香扑鼻而来，顾客们端着托盘在人群中穿梭，寻找空位。",
         ["A更好，简洁", "B更好，运用了感官描写（嗅觉、视觉）和动作描写，更生动", "两段一样好", "都不好"],
         1, "mcq", "hard"),
        ("记叙文写作：题目\"一次难忘的经历\"，学生只写了事情经过，没写为什么难忘，没写感受。评价这篇作文：",
         ["很好，有完整情节", "缺少点题和感受，没有突出'难忘'，中心不明确", "太短", "格式错误"],
         1, "mcq", "hard"),
        ("高级写作技巧：在记叙文中穿插人物的心理活动，如\"看着试卷上鲜红的分数，我的心像被针刺一样疼，眼泪不争气地掉了下来\"。这种写法的作用是：",
         ["使文章更长", "通过心理描写和比喻，深入表现人物内心感受，增强文章感染力", "没有必要", "太啰嗦"],
         1, "mcq", "hard"),
    ],
    "idioms-proverbs-advanced-sec2": [
        # Easy (1-5)
        ("\"锲而不舍\"的意思是：",
         ["容易放弃", "坚持不懈", "很聪明", "不努力"],
         1, "mcq", "easy"),
        ("哪个成语形容学习刻苦？",
         ["好吃懒做", "废寝忘食", "无所事事", "得过且过"],
         1, "mcq", "easy"),
        ("\"画蛇添足\"比喻：",
         ["画画技术好", "做了多余的事，反而不好", "画蛇很难", "蛇有脚"],
         1, "mcq", "easy"),
        ("\"大公无私\"是什么感情色彩？",
         ["贬义", "中性", "褒义", "没有感情色彩"],
         2, "mcq", "easy"),
        ("\"日新月异\"形容：",
         ["时间过得慢", "变化很快", "太阳和月亮", "没有变化"],
         1, "mcq", "easy"),
        # Medium (6-10)
        ("选出成语使用正确的句子：",
         ["他学习很好，真是守株待兔的结果。", "新加坡发展日新月异，变化很大。", "她很自私，真是大公无私。", "他画蛇添足地写了很好的作文。"],
         1, "mcq", "medium"),
        ("\"亡羊补牢\"的意思和下列哪个最接近？",
         ["为时已晚", "及时改正错误还不算晚", "养羊很难", "修补很重要"],
         1, "mcq", "medium"),
        ("哪组成语都是形容团队合作的？",
         ["众志成城、同舟共济", "自私自利、见利忘义", "锲而不舍、废寝忘食", "画蛇添足、守株待兔"],
         0, "mcq", "medium"),
        ("分析：\"新加坡在建国后的几十年里发展___，从第三世界国家___成为发达国家。\" 填入最恰当的成语：",
         ["日新月异、脱胎换骨", "守株待兔、画蛇添足", "废寝忘食、锲而不舍", "大公无私、舍己为人"],
         0, "mcq", "medium"),
        ("\"熟能生巧\"告诉我们：",
         ["学习靠天分", "做得多了自然就熟练", "不用练习", "熟悉就足够"],
         1, "mcq", "medium"),
        # Hard (11-15)
        ("判断句子错误：\"他的成绩突飞猛进地进步了。\" 错误原因是：",
         ["语法错误", "成语使用重复，'突飞猛进'本身包含'进步'的意思", "没有错误", "标点错误"],
         1, "mcq", "hard"),
        ("选出成语使用错误的句子：",
         ["学生们齐心协力完成了任务。", "他拾金不昧的行为值得表扬。", "这个自私自利的人真是大公无私。", "新加坡的变化日新月异。"],
         2, "mcq", "hard"),
        ("\"凿壁偷光\"的典故是：",
         ["有人偷光", "古人因为家里穷，在墙上凿洞，借邻居的光读书，形容勤奋学习", "凿墙很难", "光线很重要"],
         1, "mcq", "hard"),
        ("区分近义成语：\"一丝不苟\"和\"精益求精\"的区别是：",
         ["没有区别", "一丝不苟强调认真仔细，精益求精强调追求更好", "意思完全相反", "都是贬义"],
         1, "mcq", "hard"),
        ("综合运用：写一段关于学习的话，要求使用至少两个成语。判断哪段使用最恰当？",
         ["学习要守株待兔，画蛇添足。", "学习要锲而不舍，熟能生巧，这样才能取得好成绩。", "学习很难，不用努力。", "学习就是学习。"],
         1, "mcq", "hard"),
    ],
    "practical-writing-sec2": [
        # Easy (1-5)
        ("正式书信的称呼应该用：",
         ["你好", "Hi", "尊敬的校长：", "校长"],
         2, "mcq", "easy"),
        ("正式书信的结束语是：",
         ["再见", "拜拜", "此致 敬礼！", "See you"],
         2, "mcq", "easy"),
        ("通知的标题应该写：",
         ["关于通知", "通知", "请注意", "公告"],
         1, "mcq", "easy"),
        ("写电子邮件时，主题栏应该：",
         ["可写可不写", "写得越长越好", "简洁明了地说明邮件目的", "写自己的名字"],
         2, "mcq", "easy"),
        ("正式书信的署名应该在：",
         ["开头", "中间", "右下角，写在日期上面", "左上角"],
         2, "mcq", "easy"),
        # Medium (6-10)
        ("判断这封信的问题：\n\n亲爱的老师\n我想请假。\n学生：李明\n\n问题是：",
         ["没有问题", "缺少称呼的冒号、正文太简单、缺少日期和结束语", "太长", "格式完美"],
         1, "mcq", "medium"),
        ("通知应该包括的5W1H是指：",
         ["谁、什么、哪里、什么时候、为什么、怎么做", "五个W和一个H", "只要写清楚就行", "随便写"],
         0, "mcq", "medium"),
        ("选出最合适的电邮开头（写给老师询问作业）：",
         ["Hi！", "老师，作业是什么？", "尊敬的王老师：\n    您好！我是中二（3）班的学生张伟，想询问关于华文作业的问题。", "喂，老师"],
         2, "mcq", "medium"),
        ("活动报告的结构应该包括：",
         ["只写活动内容", "标题、基本信息、活动内容、活动成果、总结", "随便写", "只写感想"],
         1, "mcq", "medium"),
        ("写给长辈的信，语气应该：",
         ["随便、轻松", "礼貌、尊重", "命令式", "不用考虑"],
         1, "mcq", "medium"),
        # Hard (11-15)
        ("评价这个通知的问题：\n\n通知\n学校要开运动会，大家来参加。\n学校\n\n主要问题是：",
         ["没有问题", "缺少具体的时间、地点、报名方式等重要信息（5W1H不完整），且缺少日期", "太短", "标题错误"],
         1, "mcq", "hard"),
        ("对比两封给校长的建议信开头，哪个更好？\nA: 校长你好！我有个想法。\nB: 尊敬的校长：\n    您好！我是中二（1）班的学生李明。我写这封信是想建议学校增设华文阅读角。",
         ["A更好，简洁", "B更好，格式正确，称呼恰当，清楚说明身份和写信目的", "两个一样好", "都不好"],
         1, "mcq", "hard"),
        ("写电子邮件给老师请病假，选出最恰当的结尾：",
         ["拜拜！", "谢谢老师的理解。祝工作顺利！\n学生：王明", "再见", "没有结尾"],
         1, "mcq", "hard"),
        ("评价这个活动报告：只写了\"我们开了运动会，很好玩，大家很开心\"。问题是：",
         ["很好", "缺少具体数据（参与人数、项目数）、缺少活动过程描述、语言不够正式客观", "太长", "没有错误"],
         1, "mcq", "hard"),
        ("实用文写作综合题：要写一封信邀请校长参加班级的华文周活动。这封信应该包括（按顺序）：",
         ["问候-活动内容-请求参加-署名", "称呼-问候-说明活动（时间地点内容）-诚恳邀请-结束语-署名和日期", "直接说请来参加", "只写活动内容"],
         1, "mcq", "hard"),
    ],
    "oral-communication-sec2": [
        # Easy (1-5)
        ("演讲开头应该：",
         ["直接结束", "问候听众并介绍主题", "讲笑话", "保持沉默"],
         1, "mcq", "easy"),
        ("表达自己观点可以说：",
         ["你错了", "我认为...", "绝对是这样", "不关我的事"],
         1, "mcq", "easy"),
        ("表示同意别人的观点应该说：",
         ["你说得很对。", "随便", "不知道", "可能吧"],
         0, "mcq", "easy"),
        ("礼貌地拒绝应该说：",
         ["不行！", "不要！", "对不起，恐怕不行。", "你烦不烦"],
         2, "mcq", "easy"),
        ("演讲时应该：",
         ["一直看稿子", "眼神与听众交流", "闭着眼睛", "看天花板"],
         1, "mcq", "easy"),
        # Medium (6-10)
        ("在小组讨论中，礼貌地表示不同意见应该说：",
         ["你完全错了！", "我有不同的看法。我认为...", "你不懂", "别说了"],
         1, "mcq", "medium"),
        ("演讲的结尾应该：",
         ["突然停止", "总结要点，感谢听众", "讲新的内容", "什么都不说"],
         1, "mcq", "medium"),
        ("判断：\"大家好！今天我要谈的是环保的重要性。你们知道新加坡每天产生多少垃圾吗？\" 这个开头好在哪里？",
         ["太长", "用问题引起听众兴趣，切入主题", "不够正式", "没有问候"],
         1, "mcq", "medium"),
        ("在讨论中，要总结大家的意见，应该说：",
         ["我说得对", "随便", "综合大家的意见，我们达成的共识是...", "不用总结"],
         2, "mcq", "medium"),
        ("在小贩中心向小贩点餐，最礼貌的说法是：",
         ["给我鸡饭！", "老板，麻烦来一份鸡饭。", "快点！", "鸡饭！"],
         1, "mcq", "medium"),
        # Hard (11-15)
        ("评价这个演讲结构：\n开头-介绍主题（2分钟）\n中间-三个要点，每点都有例子（5分钟）\n结尾-总结，呼吁行动（1分钟）\n评价：",
         ["太长", "结构完整，时间分配合理，有开头、主体、结尾", "太短", "缺少内容"],
         1, "mcq", "hard"),
        ("在正式讨论中，有同学说了错误的信息，你应该：",
         ["直接说'你错了'", "保持沉默", "礼貌地提出：'关于这一点，我查到的资料显示...'", "嘲笑他"],
         2, "mcq", "hard"),
        ("对比两种演讲方式，哪个更好？\nA: 语速很快，一直看稿子，没有停顿，声音平淡\nB: 语速适中，偶尔看稿，有眼神交流，声音有抑扬顿挫，重点处停顿",
         ["A更好，节省时间", "B更好，能吸引听众，表达更清晰有感染力", "两个一样", "都不好"],
         1, "mcq", "hard"),
        ("情景交际：在学校遇到外国访客迷路了想去礼堂，你应该：",
         ["不理他", "指个方向就走", "礼貌地说：'您好！请跟我来，我带您去礼堂。'然后带他去", "说不知道"],
         2, "mcq", "hard"),
        ("综合口语技能：要在班上做一个5分钟的演讲，题目是'我最敬佩的人'。最佳准备方法是：",
         ["不用准备，直接讲", "准备好完整的演讲稿，列出要点（人物介绍、敬佩原因、事例、感受），练习语气和眼神交流", "只写题目", "背几个成语"],
         1, "mcq", "hard"),
    ]
}

# Add exercises to chapters
for chapter in chapters:
    chapter_id = chapter['id']
    if chapter_id in exercise_data:
        exercises = []
        for i, (prompt, choices, answer, ex_type, difficulty) in enumerate(exercise_data[chapter_id], 1):
            exercise = {
                "id": f"{chapter_id}-ex{i}",
                "type": ex_type,
                "difficulty": difficulty,
                "prompt": prompt,
                "prompt_zh": prompt,  # Already in Chinese
                "choices": choices,
                "choices_zh": choices,
                "answer": answer,
                "explanation": f"这测试{chapter['title_zh']}的理解。",
                "explanation_zh": f"这测试{chapter['title_zh']}的理解。"
            }
            exercises.append(exercise)
        chapter['exercises'] = exercises

# Save updated chapters
with open('chapters/sec2-chinese-chapters.json', 'w', encoding='utf-8') as f:
    json.dump(chapters, f, ensure_ascii=False, indent=2)

print(f"为{len(chapters)}个章节添加了练习")
total_exercises = sum(len(ch['exercises']) for ch in chapters)
print(f"总共创建练习：{total_exercises}题")
print("练习分布：")
for ch in chapters:
    print(f"  {ch['title_zh']}：{len(ch['exercises'])}题")
